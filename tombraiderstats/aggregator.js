// 2015-07-15
var ljacqu={};ljacqu.config=function(){var e=["enemy","item","secret","gold","silver"],t={gunmen:"gunman",men:"men",mercenaries:"mercenary",mummies:"mummy",switches:"switch",tribesmen:"tribesman",wolves:"wolf"};return{classesToAggregate:e,plurals:t}}(),ljacqu.selector=function(){var e=function(e){return"span."+e},t=function(){return'[class^="walk-table"] a[href^="walks/"]'};return{entityClass:e,walkthroughLinks:t}}(),ljacqu.jquery=function(){var e=function(e){var t=0,n=function(){return t++,"undefined"!=typeof jQuery?void e():void(100>t?setTimeout(n,100):console.error("Could not load jQuery!"))};if("undefined"==typeof jQuery){delete $;var r=document.createElement("script");r.src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(r),n()}else e()};return{loadJquery:e}}(),ljacqu.texthelper=function(){var e=function(e){return e.match(/^secret #\d+$/i)?"secret":e.replace(/^\W+/,"").replace(/\W+$/,"").trim().toLowerCase()},t=function(t){if(t=e(t),""===t)return{name:"",number:0};var n=t.match(/^(\d+) (.*)$/);if(n)return{number:parseInt(n[1]),name:n[2]};var r=["one","two","three","four","five","six"],a=new RegExp("^("+r.join("|")+")\\s(.*?)$"),i=t.match(a);return i?(r.unshift(0),{name:i[2],number:r.indexOf(i[1])}):{name:t,number:1}},n=function(e,t){if(e=e.toLowerCase(),"undefined"!=typeof ljacqu.config.plurals[e])return ljacqu.config.plurals[e];if("s"===e.substr(e.length-1)){var n=e.substr(0,e.length-1);if("undefined"!=typeof t[n])return n}return e},r=function(){var e=["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth"],t=["the","a"],n=["more","additional","another","other","sets of","boxes of","bunches of","bundles of"],r=function(e){return"("+e.join("\\s|")+"\\s)"};return new RegExp("^("+r(n)+"|"+r(t)+"?"+r(e)+"?)?(.*?)$","i")},a=function(e,t){var a=e.match(r()),i=a?a[a.length-1]:e;return i=n(i,t),i!==e&&(console.log(e+" renamed to "+i),"undefined"!=typeof t[i]?t[i]+=t[e]:t[i]=t[e],delete t[e]),t},i=function(e){var t=e;for(var n in e)e.hasOwnProperty(n)&&(t=a(n,t));return t};return{getSemanticInfo:t,mergeEntities:i}}(),ljacqu.document=function(){var e=function(e,t){t=t||document;var n={};return $.each($(ljacqu.selector.entityClass(e),t),function(){var e=ljacqu.texthelper.getSemanticInfo($(this).text());""!==e.name&&("undefined"==typeof n[e.name]?n[e.name]=e.number:n[e.name]+=e.number)}),ljacqu.texthelper.mergeEntities(ljacqu.texthelper.mergeEntities(n))};return{fetchEntities:e}}(),ljacqu.effects=function(){var e=function(){$("html, body").animate({scrollTop:0},"slow")},t=function(){var e=$(".adsense-flex-header:first");e.fadeOut(function(){$("div:first p.header1").parents("div:eq(1)").siblings("p:eq(2)").after(e),e.fadeIn()})};return{moveTopAd:t,scrollToTop:e}}(),ljacqu.container=function(){var e=function(){var e=$("#wrap");if(0===e.length&&(e=$("#LayoutDiv1"),0===e.length))throw new Error("Could not get base element!");return e},t=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},n=function(e){var t=e.split("/");return"ctr_"+t[t.length-1].split(".")[0]},r=function(t){var r=n(t.attr("href"));e().before('<div id="'+r+'"><h1>'+t.text()+"</h1></div>");var a=$("#"+r);return $("#"+r).find("h1").click(function(){a.find("h2, table").toggle()}),a},a=function(){return{attr:function(){return"results"},text:function(){return"Statistics"}}},i=function(e){var t=n(e.attr("href")),a=$("#"+t);return 0===a.length&&(a=r(e)),a},o=function(e){return"sec_"+e},u=function(e,t,n){var r=i(t);r.append('<div class="'+e+'"><h2>'+n+"</h2><table></table></div>")},c=function(e,n){n=n||a();var r=i(n),c=o(e),l=r.find("."+c);return 0===l.length&&(u(c,n,t(e)),l=r.find("."+c)),l},l=function(){e().prevAll("div").remove()};return{createContainer:r,getSection:c,removeAll:l}}(),ljacqu.display=function(){var e=function(e){var t="";return e.html&&(t+='style="'+e.html+'"'),e["class"]&&(t+=' class="'+e["class"]+'"'),t=t.trim(),0===t.length?"":" "+t},t=function(t,n,r){for(var a in n)n.hasOwnProperty(a)&&t.append($("<tr"+e(r)+">").append("<td>"+a+'</td><td style="text-align: right">'+n[a]+"</td>"))},n=function(e){e.html("<tr><th>Type</th><th>Total</th></tr>")},r=function(e,r,a){var i=ljacqu.container.getSection(r,a),o=i.find("table");n(o),t(o,e,{"class":r}),0===o.find("td").length&&i.remove()},a=function(e){var t=$("#agg_err");0===t.length&&($("body").prepend('<div id="agg_err" style="color:#300; display:block; border:1px solid #900; background-color:#fee; padding:10px; margin:20px; z-index:2015; opacity:1"></div>'),t=$("#agg_err")),t.hide(),ljacqu.effects.scrollToTop(),t.html(e),t.fadeIn()};return{displayEntities:r,displayError:a}}(),ljacqu.run=function(){var e=function(e,t){e=e||!1;for(var n=0;n<ljacqu.config.classesToAggregate.length;n++){var r=ljacqu.config.classesToAggregate[n],a=ljacqu.document.fetchEntities(r,e);ljacqu.display.displayEntities(a,r,t)}},t=function(){$.each($(ljacqu.selector.walkthroughLinks()),function(){var t=$(this);ljacqu.container.createContainer(t),$.get(t.attr("href"),{},function(n){e(n.replace(/<img/g,"<cheese"),t)},"html")})},n=function(){var e=window.location.href.match(/^https?:\/\/(www\.)?tombraiders\.net(\/.*)?$/i);return e||ljacqu.display.displayError("You are not on <b>tombraiders.net</b>"),e};return{processPage:e,overviewPageRunner:t,checkWebsite:n}}(),ljacqu.jquery.loadJquery(function(){ljacqu.run.checkWebsite()&&($(ljacqu.selector.walkthroughLinks()).length>0?ljacqu.run.overviewPageRunner():ljacqu.run.processPage())});