// 2015-07-18
var ljacqu={};ljacqu.config=function(){var e=["enemy","item","hazard","secret","gold","silver","friendly"],t={"cat mummies":"cat mummy",gunmen:"gunman","large medipak":"large medipack",men:"man",mercenaries:"mercenary",mummies:"mummy","shotgun ammo":"shotgun shells","small medipak":"small medipack","smg ammo":"smg clips",switches:"switch",tribesmen:"tribesman","wolf's":"wolf",wolves:"wolf"},n=function(e){return"span."+e},r=function(){return'[class^="walk-table"] a[href^="walks/"]'};return{classesToAggregate:e,plurals:t,selectEntities:n,selectWalkthroughLinks:r}}(),ljacqu.status={},ljacqu.loadJquery=function(e){var t=0,n=function(){return t++,"undefined"!=typeof jQuery?void e():void(100>t?setTimeout(n,100):console.error("Could not load jQuery!"))};if("undefined"==typeof jQuery){delete $;var r=document.createElement("script");r.src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(r),n()}else e()},ljacqu.texthelper=function(){var e=function(e){return e.match(/^secret #\d+$/i)?"secret":e.replace(/^\W+/,"").replace(/\W+$/,"").trim().toLowerCase()},t=function(t){if(t=e(t),""===t)return{name:"",number:0};var n=t.match(/^(\d+) (.*)$/);if(n)return{number:parseInt(n[1]),name:n[2]};var r=["one","two","three","four","five","six"],a=new RegExp("^("+r.join("|")+")\\s(.*?)$"),i=t.match(a);return i?(r.unshift(0),{name:i[2],number:r.indexOf(i[1])}):{name:t,number:1}},n=function(e,t){if(e=e.toLowerCase(),"undefined"!=typeof ljacqu.config.plurals[e])return ljacqu.config.plurals[e];if("s"===e.substr(e.length-1)){var n=e.substr(0,e.length-1);if("undefined"!=typeof t[n])return n}return e},r=function(){var e=["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth"],t=["the","a"],n=["more","additional","another","other","sets of","boxes of","bunches of","bundles of"],r=function(e){return"("+e.join("\\s|")+"\\s)"};return new RegExp("^("+r(n)+"|"+r(t)+"?"+r(e)+"?)?(.*?)$","i")},a=function(e,t){var a=e.match(r()),i=a?a[a.length-1]:e;return i=n(i,t),i!==e&&(console.log(e+" renamed to "+i),"undefined"!=typeof t[i]?t[i]+=t[e]:t[i]=t[e],delete t[e]),t},i=function(e){var t=e;for(var n in e)e.hasOwnProperty(n)&&(t=a(n,t));return t};return{getSemanticInfo:t,mergeEntities:i}}(),ljacqu.document=function(){var e=function(e,t){t=t||document;var n={};return $.each($(ljacqu.config.selectEntities(e),t),function(){var e=ljacqu.texthelper.getSemanticInfo($(this).text());""!==e.name&&("undefined"==typeof n[e.name]?n[e.name]=e.number:n[e.name]+=e.number)}),ljacqu.texthelper.mergeEntities(ljacqu.texthelper.mergeEntities(n))};return{fetchEntities:e}}(),ljacqu.effects=function(){var e=function(){$("html, body").animate({scrollTop:0},"slow")},t=function(){var e=$(".adsense-flex-header:first");e.fadeOut(function(){$("div:first p.header1").parents("div:eq(1)").siblings("p:eq(2)").after(e),e.fadeIn()})},n=function(e,t){if("single"===ljacqu.status.mode)e.find("tr").find("td:first").attr("class",t);else{var n="width: auto";("undefined"==typeof e.attr("style")||-1===e.attr("style").indexOf(n))&&e.attr("style",n),e.find("tr:even").attr("style","background:#343434;color:#BCBCBC")}};return{moveTopAd:t,scrollToTop:e,styleTable:n}}(),ljacqu.container=function(){var e=function(){var e=$("#wrap");if(0===e.length&&(e=$("#LayoutDiv1"),0===e.length))throw new Error("Could not get base element!");return e},t=function(e){var t=e.split("/");return"ctr_"+t[t.length-1].split(".")[0]},n=function(n){var r=t(n.attr("href"));if(0!==$("#"+r).length)return $("#"+r);e().before('<div id="'+r+'"><h1>'+n.text()+"</h1></div>");var a=$("#"+r);return $("#"+r).find("h1").click(function(){a.find("div:visible").length>0?a.find("div").hide():a.find("div").show()}),a},r=function(){return{attr:function(){return"results"},text:function(){return"Statistics"}}},a=function(e){var r=t(e.attr("href")),a=$("#"+r);return 0===a.length&&(a=n(e)),a},i=function(e){return"sec_"+e},u=function(e,t,n){var r=a(t);r.append('<div class="'+e+'"><h2>'+n+"</h2><table></table></div>");var i=r.find("."+e);return i.find("h2").click(function(){i.find("table").toggle()}),i},o=function(e,t){t=t||r();var n=a(t),o=i(e),s=n.find("."+o);if(0===s.length){var c=e.charAt(0).toUpperCase()+e.substr(1);s=u(o,t,c)}return s},s=function(e){return $('div[id^="ctr"] div.sec_'+e)},c=function(){e().prevAll("div").remove()};return{createContainer:n,getContainer:a,getSection:o,getAllSections:s,removeAll:c}}(),ljacqu.display=function(){var e=function(e,t){var n=!1;for(var r in t)t.hasOwnProperty(r)&&(n=!0,e.append($("<tr>").append("<td>"+r+'</td><td style="text-align: right">'+t[r]+"</td>")));return n},t=function(e){e.html("<tr><th>Type</th><th>Total</th></tr>")},n=function(){if("single"===ljacqu.status.mode||ljacqu.status.handledLinks===ljacqu.status.foundLinks)for(var e=0;e<ljacqu.config.classesToAggregate.length;e++){var t=ljacqu.config.classesToAggregate[e];"undefined"==typeof ljacqu.status.classes[t]&&ljacqu.container.getAllSections(t).remove()}},r=function(n,r,a){var i=ljacqu.container.getSection(r,a),u=i.find("table");t(u);var o=e(u,n);ljacqu.effects.styleTable(u,r),o?ljacqu.status.classes[r]=o:u.html("<tr><td>No entities found.</td></tr>")},a=function(e){var t=$("#agg_err");0===t.length&&($("body").prepend('<div id="agg_err" style="color:#300; display:block; border:1px solid #900; background-color:#fee; padding:10px; margin:20px; z-index:2015; opacity:1"></div>'),t=$("#agg_err")),t.hide(),ljacqu.effects.scrollToTop(),t.html(e),t.fadeIn()};return{displayEntities:r,displayError:a,removeEmptySections:n}}(),ljacqu.run=function(){var e=function(e,t){e=e||!1;for(var n=0;n<ljacqu.config.classesToAggregate.length;n++){var r=ljacqu.config.classesToAggregate[n],a=ljacqu.document.fetchEntities(r,e);ljacqu.display.displayEntities(a,r,t)}ljacqu.status.handledLinks++,ljacqu.display.removeEmptySections()},t=function(e){ljacqu.status={mode:e,classes:{},foundLinks:0,handledLinks:0}},n=function(e,t){return{attr:function(){return e},text:function(){return t}}},r=function(){var t=$(ljacqu.config.selectWalkthroughLinks());ljacqu.status.foundLinks=t.length;var r={};$.each(t,function(){var t=$(this).attr("href").split("#")[0],a=n(t,$(this).text());if("undefined"!=typeof r[t]){var i=ljacqu.container.getContainer(a).find("h1");return-1===i.text().indexOf(a.text())&&i.append('<span style="font-size: 0.8em"> + '+a.text()+"</span>"),ljacqu.status.handledLinks++,void ljacqu.display.removeEmptySections()}ljacqu.container.createContainer(a),r[t]=!0,$.get(t,{},function(t){e(t.replace(/<img/g,"<cheese"),a)},"html")})},a=function(){var e=window.location.href.match(/^https?:\/\/(www\.)?tombraiders\.net(\/.*)?$/i);return e||ljacqu.display.displayError('You are not on <b><a href="http://tombraiders.net">tombraiders.net</a></b>'),e};return{initStatus:t,processPage:e,overviewPageRunner:r,checkWebsite:a}}(),ljacqu.loadJquery(function(){ljacqu.run.checkWebsite()&&($(ljacqu.config.selectWalkthroughLinks()).length>0?(ljacqu.run.initStatus("overview"),ljacqu.run.overviewPageRunner()):(ljacqu.run.initStatus("single"),ljacqu.run.processPage()))});
